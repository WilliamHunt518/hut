# DJI Hut Server - File Tree
### University of Southampton
##### Last Updated: 13/09/2018, Joe Early
------
This document gives an overview of the code structure and a description of each of the (code) files.

```
+ src (Server code directory) 
    + maxsum (Maxsum code for auto allocation)
        - ???
    + server (Main server code directory)
        + controller (MVC Controller classes)
            + handler (Handler classes - for dealing with REST API calls)
                - AgentHandler (Agent REST API functionality)
                - AllocationHandler (Allocation REST API functionality)
                - ModeHandler (Operation Mode REST API functionality)
                - RestHandler (Abstract class - basis for other handler classes)
                - RestHandlerFactory (Factory class for making handler classes)
                - RootHandler (Root (i.e. /) REST API functionality)
                - TargetHandler (Target REST API Functionality)
                - TaskHandler (Task REST API Functionality)
                - UnregisteredPathException (Exception class for invalid end points)
                - VisualizerHandler (Visualizer REST API Functionality)
            - AbstractController (Abstract class - basis for other controller classes)
            - AgentController (Controller class for agents)
            - ConnectionController (Controller class for the REST API - sets up all the handler classes)
            - HazardController (Controller class for hazards)
            - TargetController (Controller class for targets)
            - TaskController (Controller class for tasks)
        + model (MVC Model classes)
            + hazard (Hazard classes)
                - FireHazard (Implementation of fire hazard type)
                - Hazard (Abstract class - base class for hazards)
            + target (Target classes)
                - HumanTarget (Implementation of human target type)
                - Target (Abstract class - base class for targets)
            + task (Task classes)
                - MonitorTask (Implementation of monitor task)
                - PatrolTask (Implementation of patrol task)
                - RegionTask (Implementation of region task)
                - Task (Abstract class - base class for tasks)
                - WaypointTask (Implementation of waypoint task)
            - Agent (Abstract class - base class for agents)
            - AgentReal (Implementation of physical agents)
            - AgentVirtual (Implementation of virtual agents)
            - Coordinate (LatLng position)
            - IdObject (Abstract class - object with an id (e.g. agents, tasks, targets etc.))
            - MObject (Abstract class - object with a position (e.g. agents, tasks, targets etc.))
            - State (The all encapsulating state class, contains the entire model)
        - Allocator (Responsible for handling changes to the allocation and calling maxsum)
        - QueueManager (Deals with communication with real UAVs via RabbitMQ)
        - Simulator (Runnable class that starts the server)
    + tool (Utility classes)
        - GsonUtils (JSON utility class that uses GSON)
        - HttpServer (Lightweight HTTP server implementation, used by ConnectionController)
    - VisualizerExample (A simple runnable class to demonstrate how to access the visualizer endpoint)
+ web (The Javascript client implementation)
    + app (Main Javascript code)
        + devices (???)
            - ???
        + models (Model classes using Backbone.js)
            - agent.js (Agent model class)
            - base.js (Base class for all model classes)
            - hazards.js (Hazard model class)
            - state.js (Contains the entire model, similar to server State class)
            - targets.js (Target model class)
            - tasks.js (Task model class)
        + views (View classes using Backbone.js)
            + map (Controller classes for the map)
                - MapAgentController.js (Controller for agent based stuff on the map)
                - MapController.js (Controller for generic stuff on the map)
                - MapHazardController.js (Controller for hazard based stuff on the map)
                - MapTargetController.js (Controller for target based stuff on the map)
                - MapTaskController.js (Controller for task stuff on the map)
            - camera.js (???)
            - control.js (???)
            - graph.js (Schedule view code)
            - layout.js (???)
            - map.js (Map view code)
        - base.js (Sets up utility functions)
        - main.js (Entry point for client main application js)
        - menu.js (Entry point for client menu js)
    - camera.html (???)
    - configmap.html (???)
    - controller.html (???)
    - homePageStyles.css (Style for the menu interface)
    - index.html (Entry point - loads menu and calls menu.js)
    - loadMain.js (Loads all the libs required for the main application)
    - loadMenu.js (Loads all the libs required for the menu)
    - multiview.html (???)
    - restart.html (???)
    - revealall.html (???)
    - sandbox.html (Html file for main application, after menu has been used)
    - style.css (Css file for main application)
```